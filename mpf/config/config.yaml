#config_version=6

hardware:
  platform: opp
  driverboards: gen2
  segment_displays: light_segment_displays

bcp:
  connections:
    local_display:
      port: 5050
  debug: true

modes:
  - base
  - qualify_race
  - skillshot
  - race_selection
  - race_1
  - high_score

opp:
   ports: /dev/ttyACM0, /dev/ttyACM1

displays:
  window:
    width: 640
    height: 160

switches:
  s_left_flipper:
    number: 0-0-1
    tags: left_flipper
  s_right_flipper:
    number: 0-0-2
    tags: right_flipper
  s_upper_flipper:
    number: 0-0-3
    tags: upper_flipper
  
  s_trough1:
    number: 0-0-8
  s_trough2:
    number: 0-0-9
  s_trough3:
    number: 0-0-10
  s_trough4:
    number: 0-0-11
  s_trough5:
    number: 0-0-27
  s_trough6:
    number: 0-0-26
  s_trough_jam:
    number: 0-0-25
  s_plunger:
    number: 0-0-24
  s_start:
    number: 0-0-19
    tags: start
  s_launch_button:
    number: 0-0-18

  s_race_scoop:
    number: 1-0-32
  s_hyper_vuk:
    number: 1-0-33
  s_center_scoop:
    number: 1-0-34
  s_sw18:
    number: 1-0-35
    tags: boost1, boost_targets
  s_sw19:
    number: 1-0-36
    tags: boost2, boost_targets
  s_sw20:
    number: 1-0-37
    tags: boost3, boost_targets   
  sw01:
    number: 1-0-38
    tags: sw01
  sw02:
    number: 1-0-39
    tags: sw02
  sw03:
    number: 1-0-40
    tags: sw03
  sw04:
    number: 1-0-41
    tags: sw04
  sw05:
    number: 1-0-42
    tags: sw05
  sw06:
    number: 1-0-43
    tags: sw06
  sw07:
    number: 1-0-44
    tags: sw07
  sw08:
    number: 1-0-45
    tags: sw08
  sw13:
    number: 1-0-46
    tags: sw13
  sw14:
    number: 1-0-47
    tags: sw14
  s_ball_launch:
    number: 0-0-19
coils:
  c_flipper_left_main:
    number: 0-0-1
    default_pulse_ms: 20
  c_flipper_left_hold:
    number: 0-0-2
    allow_enable: true
  c_flipper_right_main:
    number: 0-0-3
    default_pulse_ms: 20
  c_flipper_right_hold:
    number: 0-0-4
    allow_enable: true
  c_flipper_upper_main:
    number: 0-0-5
    default_pulse_ms: 20
  c_flipper_upper_hold:
    number: 0-0-6
    allow_enable: true

  c_trough_eject:
    number: 0-0-7
    default_pulse_ms: 20
  c_plunger:
    number: 0-0-8
    default_pulse_ms: 20
  c_race_scoop:
    number: 0-0-9
    default_pulse_ms: 20
  c_hyper_vuk:
    number: 0-0-10
    default_pulse_ms: 20
  c_center_scoop:
    number: 0-0-11
    default_pulse_ms: 20

neoseg_displays:
  neoSeg_0:
    start_channel: 0-0-91
    size: 2digit
    light_template:
      type: w
      subtype: led
      color_correction_profile: NeoSeg_orange

segment_displays:
  neoSegClock:
    number: 1
    size: 2
    integrated_dots: true
    use_dots_for_commas: true
    default_transition_update_hz: 30
    update_method: "replace"
    platform_settings:
      light_groups:
        - neoSeg_0
      type: 14segment

lights:
  l73:
    number: 0-0-0
    subtype: led
    tags: raceNeon
  l74:
    previous: l73
    subtype: led
    tags: raceNeon
  l75:
    previous: l74
    subtype: led
    tags: raceNeon
  l76:
    previous: l75
    subtype: led
    tags: raceNeon
  l66:
    previous: l76
    subtype: led
    tags: bonusLanes
  l67:
    previous: l66
    subtype: led
    tags: bonusLanes
  l68:
    previous: l67
    subtype: led
    tags: bonusLanes    
  l97:
    previous: l68
    subtype: led
    tags: lockNeonSign
  l79:
    previous: l97
    subtype: led
    tags: pops
  l78:
    previous: l79
    subtype: led
    tags: pops
  l77:
    previous: l78
    subtype: led
    tags: pops
  l23:
    previous: l77
    subtype: led
    tags: spinner2
  l61:
    previous: l23
    subtype: led
    tags: boost3
  l91:
    previous: l61
    subtype: led
    tags: tt2
  l17:
    previous: l91
    subtype: led
    tags: bet1
  l18:
    previous: l17
    subtype: led
    tags: bet2
  l19:
    previous: l18
    subtype: led
    tags: bet3
  l72:
    previous: l19
    subtype: led
    tags: lockNeonL
  l71:
    previous: l72
    subtype: led
    tags: lockNeonO
  l70:
    previous: l71
    subtype: led
    tags: lockNeonC
  l69:
    previous: l70
    subtype: led
    tags: lockNeonK
  l63:
    previous: l69
    subtype: led
    tags: rightOrbit
  l28:
    previous: l63
    subtype: led
    tags: comboRightOrbit
  l33:
    previous: l28
    subtype: led
    tags: cyberR
  l92:
    previous: l33
    subtype: led
    tags: tt4
  l32:
    previous: l92
    subtype: led
    tags: cyberE  
  l27:
    previous: l32
    subtype: led
    tags: comboRightRamp
  l64:
    previous: l27
    subtype: led
    tags: rightRamp
  l35:
    previous: l64
    subtype: led
    tags: raceFinish
  l62:
    previous: l35
    subtype: led
    tags: nodesComplete
  l34:
    previous: l62
    subtype: led
    tags: extraBall
  l90:
    previous: l34
    subtype: led
    tags: tt3
  l31:
    previous: l90
    subtype: led
    tags: cyberB
  l26:
    previous: l31
    subtype: led
    tags: comboLeftRamp
  l47:
    previous: l26
    subtype: led
    tags: leftRamp
  l46:
    previous: l47
    subtype: led
    tags: leftOrbit
  l25:
    previous: l46
    subtype: led
    tags: comboLeftOrbit
  l30:
    previous: l25
    subtype: led
    tags: cyberY
  l95:
    previous: l30
    subtype: led
    tags: tt1
  l60:
    previous: l95
    subtype: led
    tags: boost2
  l37:
    previous: l60
    subtype: led
    tags: hyperH
  l38:
    previous: l37
    subtype: led
    tags: hyperY
  l39:
    previous: l38
    subtype: led
    tags: hyperP    
  l40:
    previous: l39
    subtype: led
    tags: hyperE
  l41:
    previous: l40
    subtype: led
    tags: hyperR    
  l98:
    previous: l41
    subtype: led
    tags: addTime
  l49:
    previous: l98
    subtype: led
    tags: mystery
  l59:
    previous: l49
    subtype: led
    tags: boost1
  l48:
    previous: l59
    subtype: led
    tags: spinner1
  l24:
    previous: l48
    subtype: led
    tags: comboSpinner
  l29:
    previous: l24
    subtype: led
    tags: cyberC
  l42:
    previous: l29
    subtype: led
    tags: inlaneR
  l43:
    previous: l42
    subtype: led
    tags: inlaneA
  l80:
    previous: l43
    subtype: led
    tags: grandSlam1
  l81:
    previous: l80
    subtype: led
    tags: grandSlam2
  l51:
    previous: l81
    subtype: led
    tags: PFX2
  l50:
    previous: l51
    subtype: led
    tags: PFX1
  l52:
    previous: l50
    subtype: led
    tags: PFX3
  l56:
    previous: l52
    subtype: led
    tags: race4
  l16:
    previous: l56
    subtype: led
    tags: ballSave
  l57:
    previous: l16
    subtype: led
    tags: race5
  l58:
    previous: l57
    subtype: led
    tags: race6
  l55:
    previous: l58
    subtype: led
    tags: race3
  l54:
    previous: l55
    subtype: led
    tags: race2
  l53:
    previous: l54
    number: 0-0-65
    subtype: led
    tags: race1
  l22:
    previous: l53
    number: 0-0-66
    subtype: led
    tags: bonus3
  l21:
    previous: l22
    number: 0-0-67
    subtype: led
    tags: bonus2
  l20:
    previous: l21
    number: 0-0-68
    subtype: led
    tags: bonus1
  l82:
    previous: l20
    number: 0-0-69
    subtype: led
    tags: grandSlam3
  l83:
    previous: l82
    number: 0-0-70
    subtype: led
    tags: grandSlam4
  l84:
    previous: l83
    number: 0-0-71
    subtype: led
    tags: grandSlam5
  l44:
    previous: l84
    number: 0-0-72
    subtype: led
    tags: inlaneC
  l45:
    previous: l44
    number: 0-0-73
    subtype: led
    tags: inlaneE
  l11:
    previous: l45
    number: 0-0-74
    subtype: led
    tags: nodes11
  l12:
    previous: l11
    number: 0-0-75
    subtype: led
    tags: nodes12
  l13:
    previous: l12
    number: 0-0-76
    subtype: led
    tags: nodes13
  l14:
    previous: l13
    number: 0-0-77
    subtype: led
    tags: nodes14
  l15:
    previous: l14
    number: 0-0-78
    subtype: led
    tags: nodes15
  l10:
    previous: l15
    number: 0-0-79
    subtype: led
    tags: nodes10
  l09:
    previous: l10
    number: 0-0-80
    subtype: led
    tags: nodes9
  l08:
    previous: l09
    number: 0-0-81
    subtype: led
    tags: nodes8
  l07:
    previous: l08
    number: 0-0-82
    subtype: led
    tags: nodes7
  l05:
    previous: l07
    number: 0-0-83
    subtype: led
    tags: nodes6
  l06:
    previous: l05
    number: 0-0-84
    subtype: led
    tags: nodes5
  l04:
    previous: l06
    number: 0-0-85
    subtype: led
    tags: nodes4
  l03:
    previous: l04
    number: 0-0-86
    subtype: led
    tags: nodes3
  l02:
    previous: l03
    number: 0-0-87
    subtype: led
    tags: nodes2
  l01:
    previous: l02
    number: 0-0-88
    subtype: led
    tags: nodes1
  l93:
    previous: l01
    number: 0-0-89
    subtype: led
    tags: tt5
  l65:
    previous: l93
    number: 0-0-90
    subtype: led
    tags: shortcut
  l115:
    previous: l65
    number: 1-0-0
    subtype: led
    tags: T_GI
  l113:
    previous: l115
    number: 1-0-1
    subtype: led
    tags: T_GI
  l114:
    previous: l113
    number: 1-0-2
    subtype: led
    tags: T_GI
  l121:
    previous: l114
    number: 1-0-3
    subtype: led
    tags: T_GI
  l139:
    previous: l121
    number: 1-0-4
    subtype: led
    tags: T_GI
  l129:
    previous: l139
    number: 1-0-5
    subtype: led
    tags: T_GI
  l127:
    previous: l129
    number: 1-0-6
    subtype: led
    tags: T_GI
  l131:
    previous: l127
    number: 1-0-7
    subtype: led
    tags: T_GI
  l130:
    previous: l131
    number: 1-0-8
    subtype: led
    tags: T_GI
  l122:
    previous: l130
    number: 1-0-9
    subtype: led
    tags: T_GI
  l123:
    previous: l122
    number: 1-0-10
    subtype: led
    tags: T_GI
  l116:
    previous: l123
    number: 1-0-11
    subtype: led
    tags: T_GI
  l135:
    previous: l116
    number: 1-0-12
    subtype: led
    tags: T_GI
  l132:
    previous: l135
    number: 1-0-13
    subtype: led
    tags: T_GI
  l111:
    previous: l132
    number: 1-0-14
    subtype: led
    tags: T_GI
  l112:
    previous: l111
    number: 1-0-15
    subtype: led
    tags: T_GI
  l124:
    previous: l112
    number: 1-0-16
    subtype: led
    tags: T_GI
  l125:
    previous: l124
    number: 1-0-17
    subtype: led
    tags: T_GI
  l137:
    previous: l125
    number: 1-0-18
    subtype: led
    tags: T_GI
  l128:
    previous: l137
    number: 1-0-19
    subtype: led
    tags: T_GI
  l126:
    previous: l128
    number: 1-0-20
    subtype: led
    tags: T_GI
  l110:
    previous: l126
    number: 1-0-21
    subtype: led
    tags: T_GI
  l109:
    previous: l110
    number: 1-0-22
    subtype: led
    tags: T_GI
  l108:
    previous: l109
    number: 1-0-23
    subtype: led
    tags: T_GI
  l136:
    previous: l108
    number: 1-0-24
    subtype: led
    tags: T_GI
  l107:
    previous: l136
    number: 1-0-25
    subtype: led
    tags: T_GI
  l106:
    previous: l107
    number: 1-0-26
    subtype: led
    tags: T_GI
  l103:
    previous: l106
    number: 1-0-27
    subtype: led
    tags: T_GI
  l100:
    previous: l103
    number: 1-0-28
    subtype: led
    tags: T_GI
  l101:
    previous: l100
    number: 1-0-29
    subtype: led
    tags: T_GI
  l102:
    previous: l101
    number: 1-0-30
    subtype: led
    tags: T_GI
  l134:
    previous: l102
    number: 1-0-31
    subtype: led
    tags: T_GI
  l133:
    previous: l134
    number: 1-0-32
    subtype: led
    tags: T_GI
  l104:
    previous: l133
    number: 1-0-33
    subtype: led
    tags: T_GI
  l105:
    previous: l104
    number: 1-0-34
    subtype: led
    tags: T_GI
  l145:
    previous: l105
    number: 1-0-35
    subtype: led
    tags: T_GI
  l118:
    previous: l145
    number: 1-0-36
    subtype: led
    tags: T_GI
  l117:
    previous: l118
    number: 1-0-37
    subtype: led
    tags: T_GI
  l119:
    previous: l117
    number: 1-0-38
    subtype: led
    tags: T_GI
  l120:
    previous: l119
    number: 1-0-39
    subtype: led
    tags: T_GI
  l140:
    previous: l120
    number: 1-0-40
    subtype: led
    tags: flasher
  l141:
    previous: l140
    number: 1-0-41
    subtype: led
    tags: flasher
  l142:
    previous: l141
    number: 1-0-42
    subtype: led
    tags: flasher
  l143:
    previous: l142
    number: 1-0-43
    subtype: led
    tags: flasher
  l94:
    previous: l143
    number: 1-0-44
    subtype: led
    tags: speeder

    
playfields:
  playfield:
    tags: default
    default_source_device: plunger

flippers:
  left_flipper:
    main_coil: c_flipper_left_main
    hold_coil: c_flipper_left_hold
    activation_switch: s_left_flipper
  right_flipper:
    main_coil: c_flipper_right_main
    hold_coil: c_flipper_right_hold
    activation_switch: s_right_flipper
  upper_flipper:
    main_coil: c_flipper_upper_main
    hold_coil: c_flipper_upper_hold
    activation_switch: s_upper_flipper

keyboard:
  debug: yes
  shift+shift:
    switch: s_left_flipper
  shift+rshift:
    switch: s_right_flipper
  1:
    switch: s_trough1
    toggle: true
  2:
    switch: s_trough2
    toggle: true
  3:
    switch: s_trough3
    toggle: true
  4:
    switch: s_trough4
    toggle: true
  5:
    switch: s_trough5
    toggle: true
  p:
    switch: s_plunger
    toggle: true
  s: 
    switch: s_start
  j: 
    switch: s_right_inlane

virtual_platform_start_active_switches:
  - s_trough1
  - s_trough2
  - s_trough3

ball_devices:
  trough:
    ball_switches: s_trough1, s_trough2, s_trough3, s_trough4, s_trough5, s_trough6, s_trough_jam
    eject_coil: c_trough_eject
    tags: trough, home, drain
    jam_switch: s_trough_jam
    eject_coil_jam_pulse: 15ms
    eject_targets: plunger
    debug: true
  plunger:
    ball_switches: s_plunger
    eject_coil: c_plunger
    mechanical_eject: true
    eject_targets: playfield, race_scoop
    eject_timeouts: 3s
  race_scoop:
    ball_switches: s_race_scoop
    eject_coil: c_race_scoop
    mechanical_eject: false
    eject_timeouts: 2s
  hyper_vuk:
    ball_switches: s_hyper_vuk
    eject_coil: c_hyper_vuk
    mechanical_eject: false
    eject_timeouts: 2s
  center_scoop:
    ball_switches: s_center_scoop
    eject_coil: c_center_scoop
    mechanical_eject: false
    eject_timeouts: 2s

light_settings:
  color_correction_profiles:
    NeoSeg_red:
      whitepoint: [.8, .8, .8]
    NeoSeg_white:
      whitepoint: [.55, .55, .55]
    NeoSeg_blue:
      whitepoint: [.5, .5, .5]
    NeoSeg_orange:
      whitepoint: [.9, .9, .9]
    NeoSeg_yellow:
      whitepoint: [1, 1, 1]
    NeoSeg_green:
      whitepoint: [.5, .5, .5]


machine_vars:
  base_points:
    initial_value: 7500
    value_type: int
  mode_points:
    initial_value: 75000
    value_type: int

player_vars:
  boost_activations:
    initial_value: 1
    value_type: int